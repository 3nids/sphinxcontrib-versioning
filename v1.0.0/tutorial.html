


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; sphinxcontrib-versioning</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
  

  
    <link rel="top" title="sphinxcontrib-versioning" href="index.html"/>
        <link rel="next" title="Settings" href="settings.html"/>
        <link rel="prev" title="Installation" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> sphinxcontrib-versioning
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">General</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-docs-locally">Building Docs Locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-all-versions">Build All Versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pushing-to-remote-branch">Pushing to Remote Branch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#push-all-versions">Push All Versions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">Supported Themes</a></li>
</ul>
<p class="caption"><span class="caption-text">Web Hosting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="github_pages.html">GitHub Pages</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">sphinxcontrib-versioning</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tutorial</li>
    <li class="wy-breadcrumbs-aside">
      
          
          
            <a href="https://github.com/Robpol86/sphinxcontrib-versioning/blob/v1.0.0/docs/tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  

    




    
        
    
    
        
            
        
    





    <p class="scv-banner" style="color: white; background-color: #2980B9;">
        <b>Warning:</b> This document is for an old version of sphinxcontrib-versioning. <a href="{url}">Click here</a> for the main version of this document.
    </p>


  <div class="section" id="tutorial">
<span id="id1"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This guide will go over the basics of the project.</p>
<p>Make sure that you&#8217;ve already <a class="reference internal" href="install.html#install"><span class="std std-ref">installed</span></a> it.</p>
<div class="section" id="building-docs-locally">
<h2>Building Docs Locally<a class="headerlink" href="#building-docs-locally" title="Permalink to this headline">¶</a></h2>
<p>Before we begin make sure you have some Sphinx docs already in your project. If not read
<a class="reference external" href="http://www.sphinx-doc.org/en/stable/tutorial.html">First Steps with Sphinx</a> first. If you just want something quick
and dirty you can do the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git checkout -b feature_branch master  <span class="c1"># Create new branch from master.</span>
mkdir docs  <span class="c1"># All documentation will go here (optional, can be anywhere).</span>
<span class="nb">echo</span> <span class="s2">&quot;master_doc = &#39;index&#39;&quot;</span> &gt; docs/conf.py  <span class="c1"># Create Sphinx config file.</span>
<span class="nb">echo</span> -e <span class="s2">&quot;Test\n====\n\nSample Documentation&quot;</span> &gt; docs/index.rst  <span class="c1"># Create one doc.</span>
git add docs
git commit
git push origin feature_branch  <span class="c1"># Required.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is <strong>required</strong> to push doc files to origin. SCVersioning only works with remote branches/tags and ignores any
local changes (committed, staged, unstaged, etc). If you don&#8217;t push to origin SCVersioning won&#8217;t see them. This
eliminates race conditions when multiple CI jobs are building docs at the same time.</p>
</div>
<div class="section" id="build-all-versions">
<h3>Build All Versions<a class="headerlink" href="#build-all-versions" title="Permalink to this headline">¶</a></h3>
<p>Now that you&#8217;ve got docs pushed to origin and they build fine with <code class="docutils literal"><span class="pre">sphinx-build</span></code> let&#8217;s try building them with
SCVersioning:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sphinx-versioning -r feature_branch build docs/_build/html docs
open docs/_build/html/index.html
</pre></div>
</div>
<p>More information about all of the options can be found at <a class="reference internal" href="settings.html#settings"><span class="std std-ref">Settings</span></a> or by running with <code class="docutils literal"><span class="pre">-help</span></code> but just for
convenience:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-r</span> <span class="pre">feature_branch</span></code> tells the program to build our newly created/pushed branch at the root of the &#8220;html&#8221; directory.
We do this assuming there are no docs in master yet. Otherwise you can omit this argument.</li>
<li><code class="docutils literal"><span class="pre">docs/_build/html</span></code> is the destination directory that holds generated HTML files.</li>
<li>The final <code class="docutils literal"><span class="pre">docs</span></code> argument is the directory where we put our RST files in, relative to the git root (e.g. if you
clone your repo to another directory, that would be the git root directory). You can add more relative paths if you&#8217;ve
moved the location of your RST files between different branches/tags.</li>
</ul>
<p>The command should have worked and your docs should be available in <strong>docs/_build/html/index.html</strong> with a &#8220;Versions&#8221;
section in the sidebar.</p>
<p>If all you want SCVersioning to do is build docs for you for all versions and let you handle pushing them to a web host
and hosting them yourself then you are done here. Otherwise if you want to use the <code class="docutils literal"><span class="pre">push</span></code> feature then keep reading.</p>
</div>
</div>
<div class="section" id="pushing-to-remote-branch">
<h2>Pushing to Remote Branch<a class="headerlink" href="#pushing-to-remote-branch" title="Permalink to this headline">¶</a></h2>
<p>SCVersioning supports pushing generated HTML files of your documentation to a remote branch, handling retries in case of
race conditions where other parallel jobs try to build docs and push them to the same branch.</p>
<p>Building on the previous section above let&#8217;s go ahead and push those docs to a branch called <code class="docutils literal"><span class="pre">gh-pages</span></code>. The branch
must already exist before trying to use the push feature, branches won&#8217;t be automatically created. So let&#8217;s do that:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git checkout --orphan gh-pages  <span class="c1"># Create the required branch with no history.</span>
git reset .gitignore  <span class="c1"># Optionally keep your .gitignore.</span>
git rm -rf .  <span class="c1"># Delete staged files left over from your previous branch.</span>
<span class="nb">echo</span> <span class="s2">&quot;My project&#39;s documentation.&quot;</span> &gt; README.rst  <span class="c1"># Nice to have in all branches.</span>
git add README.rst .gitignore
git commit  <span class="c1"># Initial commit.</span>
git push origin gh-pages
</pre></div>
</div>
<p>Since this branch will just host HTML pages you can create an orphaned branch with no history instead of cluttering it
up with the history of your code changes.</p>
<div class="section" id="push-all-versions">
<span id="id2"></span><h3>Push All Versions<a class="headerlink" href="#push-all-versions" title="Permalink to this headline">¶</a></h3>
<p>Now that you have the destination branch in origin go ahead and run SCVersioning:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sphinx-versioning -r feature_branch push gh-pages . docs
</pre></div>
</div>
<p>Again you can find more information about all of the options at <a class="reference internal" href="settings.html#settings"><span class="std std-ref">Settings</span></a> or by running with <code class="docutils literal"><span class="pre">-help</span></code> but just
for convenience:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">gh-pages</span></code> is obviously the branch that will hold generated HTML docs.</li>
<li><code class="docutils literal"><span class="pre">.</span></code> is the path relative to the git root directory in the <code class="docutils literal"><span class="pre">gh-pages</span></code> branch where HTML files will be placed. If
that branch will host other files like code coverage and you want users to navigate to
<a class="reference external" href="http://domain.local/documentation/index.html">http://domain.local/documentation/index.html</a> instead of &#8220;/index.html&#8221; then replace &#8221;.&#8221; with &#8220;documentation&#8221;.</li>
<li>The final <code class="docutils literal"><span class="pre">docs</span></code> argument is the directory where we put our RST files in just like the build command in the section
above.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default SCVersioning does not delete any files in the destination directory/branch. It only adds new
ones or changes existing ones. This may lead to orphaned files in the branch if you delete branches/tags from the
repository (their HTML files will be left behind in gh-pages and still accessible to your users). To enable the
delete feature use one or more <code class="docutils literal"><span class="pre">--grm-exclude</span> <span class="pre">&lt;path&gt;</span></code> options. More info in <a class="reference internal" href="settings.html#cmdoption--grm-exclude"><code class="xref std std-option docutils literal"><span class="pre">--grm-exclude</span></code></a> or <code class="docutils literal"><span class="pre">--help</span></code>.</p>
</div>
</div>
</div>
</div>



           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="settings.html" class="btn btn-neutral float-right" title="Settings" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, @Robpol86.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: v1.0.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../v1.0.1/tutorial.html">v1.0.1</a></dd>
            <dd><a href="../v1.0.0/tutorial.html">v1.0.0</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../wip_banner3/tutorial.html">wip_banner3</a></dd>
            <dd><a href="../tutorial.html">master</a></dd>
            <dd><a href="../wip_banner2/tutorial.html">wip_banner2</a></dd>
            <dd><a href="../wip_banner/tutorial.html">wip_banner</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>